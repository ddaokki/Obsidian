## 6.4 Deadlock Detection and Recovery

### 기본 개념
- 시스템이 **교착 상태를 예방하지 않고**, **발생 후 탐지하여 복구**를 시도함.
- 이를 위해 **resource graph**를 구성함.
  - 그래프에 **cycle(순환)**이 있으면 교착 상태 발생
  - cycle이 없으면 교착 상태 아님

### 예시 시스템
- 프로세스 A~G, 자원 R~W
- 각 프로세스가 점유 중인 자원과 요청 자원이 주어짐
- 그래프에 **D → R → E → T → D** 형태의 순환 존재 → deadlock

### cycle 탐지 알고리즘
- DFS(깊이 우선 탐색) 방식
- 각 노드를 루트로 설정해 탐색하여, 이미 방문한 노드로 되돌아오면 cycle 존재

---

## 6.4.3 Recovery from Deadlock

### 방법 1: Preemption (자원 회수)
- 자원을 점유한 프로세스로부터 **자원을 강제로 회수**하여 다른 프로세스에 할당
- 현실적으로 매우 어렵거나 불가능함
  - 자원 특성상 회수 불가능한 경우가 많음 (예: 디스크 기록 도중 중단 등)

### 방법 2: Rollback (되돌리기)
- 시스템이 미리 **checkpoint**(상태 저장)해두면, 이전 상태로 **프로세스를 롤백**할 수 있음
- 메모리 상태뿐 아니라 자원 상태까지 저장해야 함
- 필요한 자원을 점유한 프로세스를 체크포인트 이전 시점으로 되돌리고, 해당 자원을 다른 프로세스에 할당

### 방법 3: Killing Processes (프로세스 종료)
- **가장 단순하고 과감한 방식**
- 순환에 포함된 프로세스를 **하나 이상 종료**하여 cycle을 제거함
- 단점: 작업 손실 위험이 있으나, 실패 시 반복 가능

> 실제 운영체제에서는 이 세 가지 방법 중 상황에 따라 적절한 방식을 선택하거나 조합하여 사용함
