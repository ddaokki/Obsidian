# B+-Tree
### B+-Treeμ μ •μ λ° μ„±μ§
#### 1. Rooted Tree
- B+-Treeλ” λ£¨νΈλ¥Ό κ°€μ§„ νΈλ¦¬
#### 2. κ· ν• νΈλ¦¬ (Balanced Tree)
- λ£¨νΈμ—μ„ λ¦¬ν”„κΉμ§€μ λ¨λ“  κ²½λ΅μ κΈΈμ΄κ°€ λ™μΌ
	- μ΄λ” νΈλ¦¬μ κ· ν•μ„ λ³΄μ¥ν•λ©° κ²€μƒ‰ μ‹κ°„μ μΌκ΄€μ„±μ„ μ κ³µ
#### 3. λ‚΄λ¶€ λ…Έλ“μ μμ‹ μ μ ν•
- λ£¨νΈ λλ” λ¦¬ν”„κ°€ μ•„λ‹ **λ‚΄λ¶€ λ…Έλ“**λ” μµμ† βn/2β‰κ°, μµλ€ nκ°μ μμ‹μ„ κ°€μ§
	- nμ€ νΈλ¦¬μ μ°¨μ(degree)
#### 4. λ¦¬ν”„ λ…Έλ“μ κ°’ μ μ ν•
- λ¦¬ν”„ λ…Έλ“λ” β(nβ’1)/2β‰κ° μ΄μƒ, nβ’1κ° μ΄ν•μ κ°’μ„ κ°€μ§ μ μμ
	- μ΄λ” κ°’μ΄ μ €μ¥λλ” λ…Έλ“μ΄λ―€λ΅, μ‚½μ…/μ‚­μ  μ‹ κ· ν• μ΅°κ±΄μ„ μ μ§€ν•΄μ•Όν•¨
#### 5. νΉμν• κ²½μ° (Special cases)
- **λ£¨νΈκ°€ λ¦¬ν”„κ°€ μ•„λ‹ κ²½μ°**: μµμ† 2κ°μ μμ‹μ„ κ°€μ Έμ•Όν•¨
- **λ£¨νΈκ°€ λ¦¬ν”„μΌ κ²½μ°**: νΈλ¦¬ μ „μ²΄κ°€ ν•λ‚μ λ…Έλ“(μ¦‰, λ…Έλ“κ°€ ν•λ‚λΏ)μΈ κ²½μ°λ΅ 0κ° μ΄μƒ (μµλ€n-1κ°)μ κ°’μ„ κ°€μ§ μ μμ

![[Pasted image 20250520131550.png]]

### B+-Tree Node Structure
#### 1. λ…Έλ“ κµ¬μ„±
![[Pasted image 20250520131744.png]]
- **K** : **κ²€μƒ‰ ν‚¤ κ°’(search-key values)**
	- μ •λ ¬λ μƒνƒλ΅ μ €μ¥λ¨
	- μ¤‘λ³µ ν‚¤λ” μΌλ‹¨ κ³ λ ¤ν•μ§€ μ•κ³  μ΄ν›„μ— μ²λ¦¬ν•¨
- **P** : **ν¬μΈν„°**
	- **λ‚΄λ¶€ λ…Έλ“**μ κ²½μ°: μμ‹ λ…Έλ“λ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„°
	- **λ¦¬ν”„ λ…Έλ“**μ κ²½μ°: λ μ½”λ“ λλ” λ μ½”λ“ λ²„ν‚·μ„ κ°€λ¦¬ν‚¤λ” ν¬μΈν„°
	
#### 2. ν‚¤ κ°’μ μ •λ ¬
- ν‚¤ κ°’μ€ ν•­μƒ μ •λ ¬λ μƒνƒλ΅ μ μ§€λ¨:
	- K1β€‹<K2β€‹<K3β€‹<β‹―<Knβ’1β€‹

#### B+-Treeμ λ¦¬ν”„ λ…Έλ“ νΉμ„±
##### 1. λ¦¬ν”„ λ…Έλ“μ ν¬μΈν„°
- ν¬μΈν„° $P_{i}$λ” **κ²€μƒ‰ ν‚¤ κ°’ $K_{i}$λ¥Ό κ°€μ§€λ” λ μ½”λ“(record) λλ” λ μ½”λ“ λ²„ν‚·(bucket)μ„ κ°€λ¦¬ν‚΄** (0 < $i$ < $n$)
##### 2. μ •λ ¬λ λ¦¬ν”„ λ…Έλ“ κ°„μ μμ„
- $L_i$ ,$L_j$κ°€ λ¦¬ν”„ λ…Έλ“μ΄κ³  $i<j$ μ΄λ©΄,
- $L_i$μ— μλ” κ²€μƒ‰ ν‚¤ κ°’λ“¤μ€ $L_j$μ— μλ” κ°’λ“¤λ³΄λ‹¤ μ‘κ±°λ‚ κ°™μ
	- μ¦‰, **λ¦¬ν”„ λ…Έλ“λ” ν‚¤ κ°’ μμ„μ— λ”°λΌ μ •λ ¬λμ–΄ μμ**
##### 3. λ¦¬ν”„ λ…Έλ“ κ°„ μ—°κ²°
- λ§μ§€λ§‰ ν¬μΈν„° $P_n$μ€ **λ‹¤μ λ¦¬ν”„ λ…Έλ“λ¥Ό κ°€λ¦¬ν‚΄**
	- μ΄λ¥Ό ν†µν•΄ λ¦¬ν”„ λ…Έλ“λ“¤μ΄ **μ—°κ²° λ¦¬μ¤νΈ ν•νƒ**λ΅ μ—°κ²°λμ–΄ μμ–΄, λ²”μ„ κ²€μƒ‰(range search) μ‹ λΉ λ¥΄κ² μμ°¨ μ ‘κ·Όμ΄ κ°€λ¥
- ![[Pasted image 20250520132826.png]]

#### Non-Leaf Nodes in B+-Trees
##### 1. μ—­ν• 
- **λΉ„-λ¦¬ν”„ λ…Έλ“**λ” **λ¦¬ν”„ λ…Έλ“λ“¤μ— λ€ν• λ‹¤λ‹¨κ³„ ν¬μ† μΈλ±μ¤(multi-level sparse index)λ¥Ό κµ¬μ„±**ν•¨
- μ¦‰, λ¦¬ν”„ λ…Έλ“κΉμ§€ λ‚΄λ ¤κ°€λ” κ²½λ΅λ¥Ό ν¨μ¨μ μΌλ΅ νƒμƒ‰ν•  μ μλ„λ΅ λ„μ™€μ£Όλ” **νƒμƒ‰μ© μΈλ±μ¤ λ…Έλ“**
- μ΄ λ…Έλ“λ“¤μ—κ²λ” **κ²€μƒ‰ ν‚¤ κ°’λ§ μ΅΄μ¬ν•κ³  μ‹¤μ  λ°μ΄ν„°λ” μ΅΄μ¬ν•μ§€ μ•μ**
##### 2. κµ¬μ΅° μ„¤λ…(nκ°μ ν¬μΈν„°κ°€ μλ” κ²½μ°)
λ…Έλ“ κµ¬μ΅°λ” λ‹¤μκ³Ό κ°™μ:	$$P_1, K_1, P_2, K_2, \ldots, K_{n-1}, P_n$$
- $K_i$ : κ²€μƒ‰ ν‚¤κ°’ (μ •λ ¬λ μƒνƒ)
- $P_i$: μμ‹ λ…Έλ“λ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„°
##### 3. νƒμƒ‰ κ·μΉ™
- $P_1$
	- $K_1$ λ³΄λ‹¤ **μ‘μ€** ν‚¤ κ°’μ„ κ°€μ§„ λ¨λ“  λ…Έλ“λ΅ μ—°κ²°λ¨
- $P_i  \,\,(2 β‰¤ i β‰¤ n-1)$ 
	- $K_i-1 β‰¤ ν‚¤\,κ°’ < K_i$  λ¥Ό κ°€μ§„ μ„λΈνΈλ¦¬λ΅ μ—°κ²°λ¨
- $P_n$
	- $K_n-1$λ³΄λ‹¤ **ν¬κ±°λ‚ κ°™μ€** ν‚¤ κ°’μ„ κ°€μ§„ λ…Έλ“λ΅ μ—°κ²°λ¨


###  BβΊ-νΈλ¦¬ κµ¬μ„± μμ‹
- λ£¨νΈ λ…Έλ“λ” λ‚΄λ¶€ λ…Έλ“μ΄κ³ , ν‚¤ `El Said`, `Mozart`λ¥Ό κ°€μ§.
- κ° ν‚¤λ” μμ‹ λ…Έλ“λ¥Ό λ‚λ„λ” κ²½κ³„κ°’ μ—­ν• μ„ ν•¨:
    - `El Said`λ³΄λ‹¤ μ‘μ€ ν‚¤ β†’ μ™Όμ½ μμ‹ λ…Έλ“
    - `El Said` μ΄μƒ `Mozart` λ―Έλ§ β†’ κ°€μ΄λ° μμ‹ λ…Έλ“
    - `Mozart` μ΄μƒ β†’ μ¤λ¥Έμ½ μμ‹ λ…Έλ“

#### λ¦¬ν”„ λ…Έλ“ κµ¬μ΅°
- μ΄ 3κ°μ λ¦¬ν”„ λ…Έλ“κ°€ μμ:
    1. `Brandt`, `Califieri`, `Crick`, `Einstein` β†’ 4κ° ν‚¤
    2. `El Said`, `Gold`, `Katz`, `Kim` β†’ 4κ° ν‚¤
    3. `Mozart`, `Singh`, `Srinivasan`, `Wu` β†’ 4κ° ν‚¤
- λ¦¬ν”„ λ…Έλ“λ” μ¤λ¥Έμ½μΌλ΅ ν–¥ν•λ” ν¬μΈν„°λ΅ μ„λ΅ μ—°κ²°λμ–΄ μμ β†’ μμ°¨ νƒμƒ‰(range query)μ— μ‚¬μ©λ¨
    

#### λ‚΄λ¶€ λ…Έλ“ μ—­ν• 
- λ£¨νΈλ” ν¬μ† μΈλ±μ¤λ΅, μ „μ²΄ ν‚¤ κ³µκ°„μ„ μ„Έ κµ¬κ°„μΌλ΅ λ‚λ”:
    - `Brandt`~`Einstein`
    - `El Said`~`Kim`
    - `Mozart`~`Wu`

---
###  BβΊ-νΈλ¦¬ μ΅°κ±΄ μ •λ¦¬ (`n = 6`)
- **λ¦¬ν”„ λ…Έλ“**:
    - μµμ† ν‚¤ μ: β(nβ€“1)/2β‰ = β5/2β‰ = 3κ°
    - μµλ€ ν‚¤ μ: nβ€“1 = 5κ°  
        β†’ ν„μ¬ λ¨λ“  λ¦¬ν”„ λ…Έλ“λ” 4κ° ν‚¤λ¥Ό κ°€μ§€κ³  μμ–΄ μ΅°κ±΄ λ§μ΅±ν•¨
        
- **λ‚΄λ¶€ λ…Έλ“(λ£¨νΈ μ μ™Έ)**:
    - μµμ† μμ‹ μ: βn/2β‰ = β6/2β‰ = 3κ°
    - μµλ€ μμ‹ μ: n = 6  
        β†’ λ£¨νΈλ” μμ‹ λ…Έλ“ 3κ°λ¥Ό κ°€μ§€κ³  μμ–΄ μ΅°κ±΄ λ§μ΅±ν•¨
        
- **λ£¨νΈ λ…Έλ“**:
    - μµμ† 2κ°μ μμ‹ ν•„μ”ν•¨  
        β†’ μ΅°κ±΄ λ§μ΅±ν•¨

### π” Queries on BβΊ-Trees
#### κ²€μƒ‰ ν•¨μ `find(v)`

1. $C = \text{root}$  
2. $\text{while } (C \text{λ” λ¦¬ν”„ λ…Έλ“κ°€ μ•„λ‹})$  
β€ƒβ€ƒ2-1. $i = \min\{i \mid v \leq K_i\}$  
β€ƒβ€ƒ2-2. κ·Έλ° $i$κ°€ μ—†λ‹¤λ©΄ β†’ $C = \text{λ§μ§€λ§‰ non-null ν¬μΈν„°}$  
β€ƒβ€ƒ2-3. $v = K_i$ μΈ κ²½μ° β†’ $C = P_{i+1}$  
β€ƒβ€ƒ2-4. κ·Έ μ™Έμ—λ” β†’ $C = P_i$  
3. μ–΄λ–¤ $i$μ— λ€ν•΄ $K_i = v$ μ΄λ©΄ β†’ $C.P_i$ λ°ν™  
4. κ·Έ μ™Έμ—λ” β†’ $\text{null}$ λ°ν™ (ν•΄λ‹Ή ν‚¤ μ—†μ)

#### νƒμƒ‰ μ•κ³ λ¦¬μ¦ μ„¤λ…
- λ£¨νΈ λ…Έλ“λ¶€ν„° μ‹μ‘ν•΄μ„ λ¦¬ν”„ λ…Έλ“μ— λ„λ‹¬ν•  λ•κΉμ§€ λ‚΄λ ¤κ°€λ©° `v`κ°€ μ–΄λ κµ¬κ°„μ— μ†ν•λ”μ§€λ¥Ό νλ‹¨ν•¨
- κ° λ‚΄λ¶€ λ…Έλ“λ” μ •λ ¬λ ν‚¤ κ°’ κΈ°μ¤€μΌλ΅ μμ‹ λ…Έλ“λ¥Ό νƒμƒ‰ν•λ” ν¬μΈν„°λ§ ν¬ν•¨ν•λ©°, μ‹¤μ  λ°μ΄ν„°λ” λ¦¬ν”„ λ…Έλ“μ— μ΅΄μ¬ν•¨
- νƒμƒ‰ μ¤‘κ°„μ— ν‚¤μ™€ μ •ν™•ν μΌμΉν•λ” κ°’μ΄ μλ‹¤λ©΄ ν•΄λ‹Ή μ„μΉμ ν¬μΈν„°λ¥Ό ν†µν•΄ κ²°κ³Όλ¥Ό λ°ν™ν•¨
- ν‚¤κ°€ μ΅΄μ¬ν•μ§€ μ•λ” κ²½μ°μ—λ” `null`μ„ λ°ν™ν•¨
    
#### νΈλ¦¬ μμ‹ κµ¬μ΅°
- λ£¨νΈλ” `Mozart` ν•λ‚μ ν‚¤λ¥Ό κ°€μ§€λ©° μ„Έ μμ‹ λ…Έλ“λ¥Ό κ°€μ§
- λ‘ λ²μ§Έ λ λ²¨μ—λ” `Califieri`, `Einstein`, `Gold`, `Srinivasan` λ“±μ ν‚¤κ°€ λ°°μΉλμ–΄ μκ³ , κ·Έμ— λ”°λΌ λ¦¬ν”„ λ…Έλ“λ΅ μ΄μ–΄μ§
- λ¦¬ν”„ λ…Έλ“μ—λ” μ‹¤μ  μ΄λ¦„ λ°μ΄ν„°κ°€ ν‚¤λ΅ ν¬ν•¨λμ–΄ μμΌλ©°, κ° λ…Έλ“ κ°„ μμ„λ€λ΅ μ—°κ²°λμ–΄ μμ

####  Range Query (λ²”μ„ μ§μ)
- **λ²”μ„ μ§μ(range query)**λ” νΉμ • λ²”μ„ λ‚΄μ κ²€μƒ‰ ν‚¤ κ°’μ„ κ°€μ§€λ” λ¨λ“  λ μ½”λ“λ¥Ό μ°Ύλ” μ§μ λ°©μ‹
- μλ¥Ό λ“¤μ–΄, $[lb, ub]$ κµ¬κ°„ λ‚΄μ ν‚¤λ¥Ό λ¨λ‘ μ΅°νν•κ³ μ ν•  λ• μ‚¬μ©λ¨

####  ν•¨μ κµ¬μ΅°
- μ΄λ΅ μ μΌλ΅λ” `\texttt{findRange(lb, ub)}`μ™€ κ°™μ€ ν•¨μλ΅ κµ¬ν„λ¨
- ν•΄λ‹Ή ν•¨μλ” μ΅°κ±΄μ„ λ§μ΅±ν•λ” λ¨λ“  λ μ½”λ“μ μ§‘ν•©μ„ λ°ν™ν•¨
- μ‹¤μ  κµ¬ν„μ—μ„λ” ν•λ‚μ”© μμ°¨μ μΌλ΅ λ μ½”λ“λ¥Ό κ°€μ Έμ¬ μ μλ„λ΅ `\texttt{next()}` ν•νƒμ **λ°λ³µμ(iterator)** μΈν„°νμ΄μ¤λ¥Ό μ κ³µν•λ” κ²½μ°κ°€ λ§μ
    

####  λ¦¬ν”„ λ…Έλ“ μμ°¨ μ ‘κ·Ό κµ¬μ΅°
- λ¦¬ν”„ λ…Έλ“λ“¤μ€ **μ¤λ¥Έμ½ ν¬μΈν„°(Pβ‚™)** λ΅ μ—°κ²°λμ–΄ μμ
- ν• λ¦¬ν”„ λ…Έλ“μ—μ„ μ‹μ‘ν•μ—¬ μ¤λ¥Έμ½μΌλ΅ κ³„μ† μ΄λ™ν•λ©° λ²”μ„μ— ν•΄λ‹Ήν•λ” κ°’λ“¤μ„ λ¨λ‘ μμ°¨μ μΌλ΅ μ¶”μ¶ κ°€λ¥
- BβΊ-νΈλ¦¬μ κµ¬μ΅° νΉμ„±μƒ, λ²”μ„ μ§μλ” λ§¤μ° ν¨μ¨μ μ„