# B+-Tree
### B+-Treeμ μ •μ λ° μ„±μ§
#### 1. Rooted Tree
- B+-Treeλ” λ£¨νΈλ¥Ό κ°€μ§„ νΈλ¦¬
#### 2. κ· ν• νΈλ¦¬ (Balanced Tree)
- λ£¨νΈμ—μ„ λ¦¬ν”„κΉμ§€μ λ¨λ“  κ²½λ΅μ κΈΈμ΄κ°€ λ™μΌ
	- μ΄λ” νΈλ¦¬μ κ· ν•μ„ λ³΄μ¥ν•λ©° κ²€μƒ‰ μ‹κ°„μ μΌκ΄€μ„±μ„ μ κ³µ
#### 3. λ‚΄λ¶€ λ…Έλ“μ μμ‹ μ μ ν•
- λ£¨νΈ λλ” λ¦¬ν”„κ°€ μ•„λ‹ **λ‚΄λ¶€ λ…Έλ“**λ” μµμ† βn/2β‰κ°, μµλ€ nκ°μ μμ‹μ„ κ°€μ§
	- nμ€ νΈλ¦¬μ μ°¨μ(degree)
#### 4. λ¦¬ν”„ λ…Έλ“μ κ°’ μ μ ν•
- λ¦¬ν”„ λ…Έλ“λ” β(nβ’1)/2β‰κ° μ΄μƒ, nβ’1κ° μ΄ν•μ κ°’μ„ κ°€μ§ μ μμ
	- μ΄λ” κ°’μ΄ μ €μ¥λλ” λ…Έλ“μ΄λ―€λ΅, μ‚½μ…/μ‚­μ  μ‹ κ· ν• μ΅°κ±΄μ„ μ μ§€ν•΄μ•Όν•¨
#### 5. νΉμν• κ²½μ° (Special cases)
- **λ£¨νΈκ°€ λ¦¬ν”„κ°€ μ•„λ‹ κ²½μ°**: μµμ† 2κ°μ μμ‹μ„ κ°€μ Έμ•Όν•¨
- **λ£¨νΈκ°€ λ¦¬ν”„μΌ κ²½μ°**: νΈλ¦¬ μ „μ²΄κ°€ ν•λ‚μ λ…Έλ“(μ¦‰, λ…Έλ“κ°€ ν•λ‚λΏ)μΈ κ²½μ°λ΅ 0κ° μ΄μƒ (μµλ€n-1κ°)μ κ°’μ„ κ°€μ§ μ μμ

![[Pasted image 20250520131550.png]]

### B+-Tree Node Structure
#### 1. λ…Έλ“ κµ¬μ„±
![[Pasted image 20250520131744.png]]
- **K** : **κ²€μƒ‰ ν‚¤ κ°’(search-key values)**
	- μ •λ ¬λ μƒνƒλ΅ μ €μ¥λ¨
	- μ¤‘λ³µ ν‚¤λ” μΌλ‹¨ κ³ λ ¤ν•μ§€ μ•κ³  μ΄ν›„μ— μ²λ¦¬ν•¨
- **P** : **ν¬μΈν„°**
	- **λ‚΄λ¶€ λ…Έλ“**μ κ²½μ°: μμ‹ λ…Έλ“λ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„°
	- **λ¦¬ν”„ λ…Έλ“**μ κ²½μ°: λ μ½”λ“ λλ” λ μ½”λ“ λ²„ν‚·μ„ κ°€λ¦¬ν‚¤λ” ν¬μΈν„°
	
#### 2. ν‚¤ κ°’μ μ •λ ¬
- ν‚¤ κ°’μ€ ν•­μƒ μ •λ ¬λ μƒνƒλ΅ μ μ§€λ¨:
	- K1β€‹<K2β€‹<K3β€‹<β‹―<Knβ’1β€‹

#### B+-Treeμ λ¦¬ν”„ λ…Έλ“ νΉμ„±
##### 1. λ¦¬ν”„ λ…Έλ“μ ν¬μΈν„°
- ν¬μΈν„° $P_{i}$λ” **κ²€μƒ‰ ν‚¤ κ°’ $K_{i}$λ¥Ό κ°€μ§€λ” λ μ½”λ“(record) λλ” λ μ½”λ“ λ²„ν‚·(bucket)μ„ κ°€λ¦¬ν‚΄** (0 < $i$ < $n$)
##### 2. μ •λ ¬λ λ¦¬ν”„ λ…Έλ“ κ°„μ μμ„
- $L_i$ ,$L_j$κ°€ λ¦¬ν”„ λ…Έλ“μ΄κ³  $i<j$ μ΄λ©΄,
- $L_i$μ— μλ” κ²€μƒ‰ ν‚¤ κ°’λ“¤μ€ $L_j$μ— μλ” κ°’λ“¤λ³΄λ‹¤ μ‘κ±°λ‚ κ°™μ
	- μ¦‰, **λ¦¬ν”„ λ…Έλ“λ” ν‚¤ κ°’ μμ„μ— λ”°λΌ μ •λ ¬λμ–΄ μμ**
##### 3. λ¦¬ν”„ λ…Έλ“ κ°„ μ—°κ²°
- λ§μ§€λ§‰ ν¬μΈν„° $P_n$μ€ **λ‹¤μ λ¦¬ν”„ λ…Έλ“λ¥Ό κ°€λ¦¬ν‚΄**
	- μ΄λ¥Ό ν†µν•΄ λ¦¬ν”„ λ…Έλ“λ“¤μ΄ **μ—°κ²° λ¦¬μ¤νΈ ν•νƒ**λ΅ μ—°κ²°λμ–΄ μμ–΄, λ²”μ„ κ²€μƒ‰(range search) μ‹ λΉ λ¥΄κ² μμ°¨ μ ‘κ·Όμ΄ κ°€λ¥
- ![[Pasted image 20250520132826.png]]

#### Non-Leaf Nodes in B+-Trees
##### 1. μ—­ν• 
- **λΉ„-λ¦¬ν”„ λ…Έλ“**λ” **λ¦¬ν”„ λ…Έλ“λ“¤μ— λ€ν• λ‹¤λ‹¨κ³„ ν¬μ† μΈλ±μ¤(multi-level sparse index)λ¥Ό κµ¬μ„±**ν•¨
- μ¦‰, λ¦¬ν”„ λ…Έλ“κΉμ§€ λ‚΄λ ¤κ°€λ” κ²½λ΅λ¥Ό ν¨μ¨μ μΌλ΅ νƒμƒ‰ν•  μ μλ„λ΅ λ„μ™€μ£Όλ” **νƒμƒ‰μ© μΈλ±μ¤ λ…Έλ“**
- μ΄ λ…Έλ“λ“¤μ—κ²λ” **κ²€μƒ‰ ν‚¤ κ°’λ§ μ΅΄μ¬ν•κ³  μ‹¤μ  λ°μ΄ν„°λ” μ΅΄μ¬ν•μ§€ μ•μ**
##### 2. κµ¬μ΅° μ„¤λ…(nκ°μ ν¬μΈν„°κ°€ μλ” κ²½μ°)
λ…Έλ“ κµ¬μ΅°λ” λ‹¤μκ³Ό κ°™μ:	$$P_1, K_1, P_2, K_2, \ldots, K_{n-1}, P_n$$
- $K_i$ : κ²€μƒ‰ ν‚¤κ°’ (μ •λ ¬λ μƒνƒ)
- $P_i$: μμ‹ λ…Έλ“λ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„°
##### 3. νƒμƒ‰ κ·μΉ™
- $P_1$
	- $K_1$ λ³΄λ‹¤ **μ‘μ€** ν‚¤ κ°’μ„ κ°€μ§„ λ¨λ“  λ…Έλ“λ΅ μ—°κ²°λ¨
- $P_i  \,\,(2 β‰¤ i β‰¤ n-1)$ 
	- $K_i-1 β‰¤ ν‚¤\,κ°’ < K_i$  λ¥Ό κ°€μ§„ μ„λΈνΈλ¦¬λ΅ μ—°κ²°λ¨
- $P_n$
	- $K_n-1$λ³΄λ‹¤ **ν¬κ±°λ‚ κ°™μ€** ν‚¤ κ°’μ„ κ°€μ§„ λ…Έλ“λ΅ μ—°κ²°λ¨


###  BβΊ-νΈλ¦¬ κµ¬μ„± μμ‹
- λ£¨νΈ λ…Έλ“λ” λ‚΄λ¶€ λ…Έλ“μ΄κ³ , ν‚¤ `El Said`, `Mozart`λ¥Ό κ°€μ§.
- κ° ν‚¤λ” μμ‹ λ…Έλ“λ¥Ό λ‚λ„λ” κ²½κ³„κ°’ μ—­ν• μ„ ν•¨:
    - `El Said`λ³΄λ‹¤ μ‘μ€ ν‚¤ β†’ μ™Όμ½ μμ‹ λ…Έλ“
    - `El Said` μ΄μƒ `Mozart` λ―Έλ§ β†’ κ°€μ΄λ° μμ‹ λ…Έλ“
    - `Mozart` μ΄μƒ β†’ μ¤λ¥Έμ½ μμ‹ λ…Έλ“

#### λ¦¬ν”„ λ…Έλ“ κµ¬μ΅°
- μ΄ 3κ°μ λ¦¬ν”„ λ…Έλ“κ°€ μμ:
    1. `Brandt`, `Califieri`, `Crick`, `Einstein` β†’ 4κ° ν‚¤
    2. `El Said`, `Gold`, `Katz`, `Kim` β†’ 4κ° ν‚¤
    3. `Mozart`, `Singh`, `Srinivasan`, `Wu` β†’ 4κ° ν‚¤
- λ¦¬ν”„ λ…Έλ“λ” μ¤λ¥Έμ½μΌλ΅ ν–¥ν•λ” ν¬μΈν„°λ΅ μ„λ΅ μ—°κ²°λμ–΄ μμ β†’ μμ°¨ νƒμƒ‰(range query)μ— μ‚¬μ©λ¨
    

#### λ‚΄λ¶€ λ…Έλ“ μ—­ν• 
- λ£¨νΈλ” ν¬μ† μΈλ±μ¤λ΅, μ „μ²΄ ν‚¤ κ³µκ°„μ„ μ„Έ κµ¬κ°„μΌλ΅ λ‚λ”:
    - `Brandt`~`Einstein`
    - `El Said`~`Kim`
    - `Mozart`~`Wu`

---
###  BβΊ-νΈλ¦¬ μ΅°κ±΄ μ •λ¦¬ (`n = 6`)
- **λ¦¬ν”„ λ…Έλ“**:
    - μµμ† ν‚¤ μ: β(nβ€“1)/2β‰ = β5/2β‰ = 3κ°
    - μµλ€ ν‚¤ μ: nβ€“1 = 5κ°  
        β†’ ν„μ¬ λ¨λ“  λ¦¬ν”„ λ…Έλ“λ” 4κ° ν‚¤λ¥Ό κ°€μ§€κ³  μμ–΄ μ΅°κ±΄ λ§μ΅±ν•¨
        
- **λ‚΄λ¶€ λ…Έλ“(λ£¨νΈ μ μ™Έ)**:
    - μµμ† μμ‹ μ: βn/2β‰ = β6/2β‰ = 3κ°
    - μµλ€ μμ‹ μ: n = 6  
        β†’ λ£¨νΈλ” μμ‹ λ…Έλ“ 3κ°λ¥Ό κ°€μ§€κ³  μμ–΄ μ΅°κ±΄ λ§μ΅±ν•¨
        
- **λ£¨νΈ λ…Έλ“**:
    - μµμ† 2κ°μ μμ‹ ν•„μ”ν•¨  
        β†’ μ΅°κ±΄ λ§μ΅±ν•¨

### Observations about BβΊ-trees
- λ…Έλ“λ” ν¬μΈν„°λ΅ μ—°κ²°λλ―€λ΅, λ…Όλ¦¬μ μΌλ΅ μΈμ ‘ν• λΈ”λ΅μ΄ λ¬Όλ¦¬μ μΌλ΅ μΈμ ‘ν•  ν•„μ”λ” μ—†μ
    
- λΉ„λ¦¬ν”„ λ…Έλ“λ“¤μ€ λ¦¬ν”„ λ…Έλ“μ— λ€ν• λ‹¤λ‹¨κ³„ ν¬μ† μΈλ±μ¤λ¥Ό ν•μ„±ν•¨
    
- μ „μ²΄ νΈλ¦¬λ” λΉ„κµμ  μ μ€ μμ λ λ²¨λ§μΌλ΅ κµ¬μ„±λ¨
    - λ£¨νΈ μ•„λ λ λ²¨μ€ μµμ† `2 Γ— βn/2β‰`κ°μ κ°’μ„ κ°€μ§
    - κ·Έ λ‹¤μ λ λ²¨μ€ `2 Γ— βn/2β‰ Γ— βn/2β‰`κ°μ κ°’μ„ κ°€μ§
    - μ΄ν›„ λ λ²¨λ“¤λ„ κ°™μ€ λ°©μ‹μΌλ΅ μ§€μμ μΌλ΅ κ°’ μκ°€ μ¦κ°€ν•¨
    - μ „μ²΄ κ²€μƒ‰ ν‚¤ μλ¥Ό `K`λΌ ν•λ©΄, νΈλ¦¬μ λ†’μ΄λ” `βlogβn/2β‰(K)β‰` μ΄ν•
- ν¨μ¨μ μΈ νƒμƒ‰ κ°€λ¥
    - νƒμƒ‰ λΉ„μ© = νΈλ¦¬ λ†’μ΄ = `βlogβn/2β‰(K)β‰`
### π” Queries on BβΊ-Trees
#### κ²€μƒ‰ ν•¨μ `find(v)`

1. $C = \text{root}$  
2. $\text{while } (C \text{λ” λ¦¬ν”„ λ…Έλ“κ°€ μ•„λ‹})$  
β€ƒβ€ƒ2-1. $i = \min\{i \mid v \leq K_i\}$  
β€ƒβ€ƒ2-2. κ·Έλ° $i$κ°€ μ—†λ‹¤λ©΄ β†’ $C = \text{λ§μ§€λ§‰ non-null ν¬μΈν„°}$  
β€ƒβ€ƒ2-3. $v = K_i$ μΈ κ²½μ° β†’ $C = P_{i+1}$  
β€ƒβ€ƒ2-4. κ·Έ μ™Έμ—λ” β†’ $C = P_i$  
3. μ–΄λ–¤ $i$μ— λ€ν•΄ $K_i = v$ μ΄λ©΄ β†’ $C.P_i$ λ°ν™  
4. κ·Έ μ™Έμ—λ” β†’ $\text{null}$ λ°ν™ (ν•΄λ‹Ή ν‚¤ μ—†μ)

#### νƒμƒ‰ μ•κ³ λ¦¬μ¦ μ„¤λ…
- λ£¨νΈ λ…Έλ“λ¶€ν„° μ‹μ‘ν•΄μ„ λ¦¬ν”„ λ…Έλ“μ— λ„λ‹¬ν•  λ•κΉμ§€ λ‚΄λ ¤κ°€λ©° `v`κ°€ μ–΄λ κµ¬κ°„μ— μ†ν•λ”μ§€λ¥Ό νλ‹¨ν•¨
- κ° λ‚΄λ¶€ λ…Έλ“λ” μ •λ ¬λ ν‚¤ κ°’ κΈ°μ¤€μΌλ΅ μμ‹ λ…Έλ“λ¥Ό νƒμƒ‰ν•λ” ν¬μΈν„°λ§ ν¬ν•¨ν•λ©°, μ‹¤μ  λ°μ΄ν„°λ” λ¦¬ν”„ λ…Έλ“μ— μ΅΄μ¬ν•¨
- νƒμƒ‰ μ¤‘κ°„μ— ν‚¤μ™€ μ •ν™•ν μΌμΉν•λ” κ°’μ΄ μλ‹¤λ©΄ ν•΄λ‹Ή μ„μΉμ ν¬μΈν„°λ¥Ό ν†µν•΄ κ²°κ³Όλ¥Ό λ°ν™ν•¨
- ν‚¤κ°€ μ΅΄μ¬ν•μ§€ μ•λ” κ²½μ°μ—λ” `null`μ„ λ°ν™ν•¨
    
#### νΈλ¦¬ μμ‹ κµ¬μ΅°
- λ£¨νΈλ” `Mozart` ν•λ‚μ ν‚¤λ¥Ό κ°€μ§€λ©° μ„Έ μμ‹ λ…Έλ“λ¥Ό κ°€μ§
- λ‘ λ²μ§Έ λ λ²¨μ—λ” `Califieri`, `Einstein`, `Gold`, `Srinivasan` λ“±μ ν‚¤κ°€ λ°°μΉλμ–΄ μκ³ , κ·Έμ— λ”°λΌ λ¦¬ν”„ λ…Έλ“λ΅ μ΄μ–΄μ§
- λ¦¬ν”„ λ…Έλ“μ—λ” μ‹¤μ  μ΄λ¦„ λ°μ΄ν„°κ°€ ν‚¤λ΅ ν¬ν•¨λμ–΄ μμΌλ©°, κ° λ…Έλ“ κ°„ μμ„λ€λ΅ μ—°κ²°λμ–΄ μμ

####  Range Query (λ²”μ„ μ§μ)
- **λ²”μ„ μ§μ(range query)**λ” νΉμ • λ²”μ„ λ‚΄μ κ²€μƒ‰ ν‚¤ κ°’μ„ κ°€μ§€λ” λ¨λ“  λ μ½”λ“λ¥Ό μ°Ύλ” μ§μ λ°©μ‹
- μλ¥Ό λ“¤μ–΄, $[lb, ub]$ κµ¬κ°„ λ‚΄μ ν‚¤λ¥Ό λ¨λ‘ μ΅°νν•κ³ μ ν•  λ• μ‚¬μ©λ¨

####  ν•¨μ κµ¬μ΅°
- μ΄λ΅ μ μΌλ΅λ” `{findRange(lb, ub)}`μ™€ κ°™μ€ ν•¨μλ΅ κµ¬ν„λ¨
- ν•΄λ‹Ή ν•¨μλ” μ΅°κ±΄μ„ λ§μ΅±ν•λ” λ¨λ“  λ μ½”λ“μ μ§‘ν•©μ„ λ°ν™ν•¨
- μ‹¤μ  κµ¬ν„μ—μ„λ” ν•λ‚μ”© μμ°¨μ μΌλ΅ λ μ½”λ“λ¥Ό κ°€μ Έμ¬ μ μλ„λ΅ `{next()}` ν•νƒμ **λ°λ³µμ(iterator)** μΈν„°νμ΄μ¤λ¥Ό μ κ³µν•λ” κ²½μ°κ°€ λ§μ
    

####  λ¦¬ν”„ λ…Έλ“ μμ°¨ μ ‘κ·Ό κµ¬μ΅°
- λ¦¬ν”„ λ…Έλ“λ“¤μ€ **μ¤λ¥Έμ½ ν¬μΈν„°(Pβ‚™)** λ΅ μ—°κ²°λμ–΄ μμ
- ν• λ¦¬ν”„ λ…Έλ“μ—μ„ μ‹μ‘ν•μ—¬ μ¤λ¥Έμ½μΌλ΅ κ³„μ† μ΄λ™ν•λ©° λ²”μ„μ— ν•΄λ‹Ήν•λ” κ°’λ“¤μ„ λ¨λ‘ μμ°¨μ μΌλ΅ μ¶”μ¶ κ°€λ¥
- BβΊ-νΈλ¦¬μ κµ¬μ΅° νΉμ„±μƒ, λ²”μ„ μ§μλ” λ§¤μ° ν¨μ¨μ μ„

### β™οΈ BβΊ-νΈλ¦¬ νƒμƒ‰ μ„±λ¥ λ¶„μ„
- ν•λ‚μ λ…Έλ“λ” μΌλ°μ μΌλ΅ λ””μ¤ν¬ λΈ”λ΅ ν¬κΈ°μ™€ κ°™μΌλ©°, λ³΄ν†µ 4KB ν¬κΈ°λ¥Ό κ°€μ§
- μΈλ±μ¤ ν•­λ© ν•λ‚λ‹Ή μ•½ 40λ°”μ΄νΈμ΄λ―€λ΅ $n \approx 100$ μμ¤€μ΄ μΌλ°μ μ„

#### μμ‹ μ΅°κ±΄
- κ²€μƒ‰ ν‚¤ κ°’μ΄ 1,000,000κ°μ΄κ³  $n = 100$μΌ κ²½μ°  
- νƒμƒ‰ μ‹ μ ‘κ·Όλλ” λ…Έλ“ μλ” μµλ€
- $$ \log_{50}(1{,}000{,}000) \approx 4$$
- μ¦‰, λ£¨νΈλ¶€ν„° λ¦¬ν”„κΉμ§€ λ‚΄λ ¤κ°€λ©° **μµλ€ 4κ° λ…Έλ“λ§ μ ‘κ·Ό**ν•λ©΄ λ¨  
- μ΄λ” νΈλ¦¬ λ†’μ΄κ°€ $K$κ°μ ν‚¤ κ°’μ— λ€ν•΄
  $$
  \left\lceil \log_{\left\lceil n/2 \right\rceil} K \right\rceil
  $$
  λ³΄λ‹¤ ν¬μ§€ μ•κΈ° λ•λ¬Έμ„


#### μ΄μ§„ νΈλ¦¬μ™€μ λΉ„κµ
- λ™μΌν• ν‚¤ μλ¥Ό κ°€μ§„ **κ· ν• μ΄μ§„ νƒμƒ‰ νΈλ¦¬**μ—μ„λ” μ•½ **20κ° λ…Έλ“**λ¥Ό μ ‘κ·Όν•΄μ•Ό ν•¨
- BβΊ-νΈλ¦¬μ™€ λΉ„κµν•΄ **5λ°° μ°¨μ΄** λ°μƒ
- μ΄λ” μ¤‘μ”ν• μ°¨μ΄μ μ„.  
    β†’ **λ¨λ“  λ…Έλ“ μ ‘κ·Όλ§λ‹¤ λ””μ¤ν¬ I/Oκ°€ λ°μƒ**ν•  μ μμΌλ©°,  
    I/O 1νλ‹Ή μ•½ **20λ°€λ¦¬μ΄**μ λΉ„μ©μ΄ μ†μ”λ¨

### π”‘ Non-Unique Keys
- κ²€μƒ‰ ν‚¤ $a_i$κ°€ κ³ μ ν•μ§€ μ•μ€ κ²½μ°,  
  β†’ κ³ μ ν• λ³µν•© ν‚¤ $(a_i, A_p)$μ— λ€ν•΄ μΈλ±μ¤λ¥Ό μƒμ„±ν•΄μ•Ό ν•¨  
  - $A_p$λ” κΈ°λ³Έ ν‚¤, λ μ½”λ“ ID, νΉμ€ κ³ μ μ„±μ„ λ³΄μ¥ν•λ” λ‹¤λ¥Έ μ†μ„±μ΄ λ  μ μμ
- $a_i = v$λ¥Ό μ°Ύκ³ μ ν•  λ•λ” λ³µν•© ν‚¤μ— λ€ν•΄ λ²”μ„ μ§μλ΅ μ²λ¦¬ κ°€λ¥  
  β†’ λ²”μ„: $(v, -\infty)$ ~ $(v, +\infty)$
- ν•μ§€λ§ μ‹¤μ  λ μ½”λ“λ¥Ό κ°€μ Έμ¤κΈ° μ„ν•΄ λ” λ§μ€ I/O μ—°μ‚°μ΄ λ°μƒν•  μ μμ  
  - μΈλ±μ¤κ°€ ν΄λ¬μ¤ν„°λ§(clustering)μΈ κ²½μ° β†’ μ ‘κ·Όμ€ μμ°¨μ μΌλ΅ μΌμ–΄λ‚¨  
  - μΈλ±μ¤κ°€ λΉ„ν΄λ¬μ¤ν„°λ§(non-clustering)μΈ κ²½μ° β†’ κ° λ μ½”λ“ μ ‘κ·Όλ§λ‹¤ λ””μ¤ν¬ I/Oκ°€ λ”°λ΅ λ°μƒν•  μ μμ


### π”„ Updates on BβΊ-Trees: Insertion
- λ μ½”λ“λ” μ΄λ―Έ νμΌμ— μ¶”κ°€λμ—λ‹¤κ³  κ°€μ •ν•¨  
  - $ptr$μ€ ν•΄λ‹Ή λ μ½”λ“λ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„°  
  - $k$λ” κ·Έ λ μ½”λ“μ κ²€μƒ‰ ν‚¤ κ°’
- κ²€μƒ‰ ν‚¤κ°€ μ‚½μ…λ  λ¦¬ν”„ λ…Έλ“λ¥Ό μ°Ύμ  
  1. λ¦¬ν”„ λ…Έλ“μ— κ³µκ°„μ΄ μμΌλ©΄ $(k, ptr)$ μμ„ μ‚½μ…ν•¨  
  2. κ³µκ°„μ΄ μ—†μΌλ©΄, μƒ $(k, ptr)$ ν•­λ©κ³Ό ν•¨κ» λ…Έλ“λ¥Ό λ¶„ν• ν•κ³   
     β†’ κ·Έ κ²°κ³Όλ¥Ό λ¶€λ¨ λ…Έλ“λ΅ μ „νν•¨ (λ‹¤μ μ¬λΌμ΄λ“μ—μ„ μƒμ„Έν μ„¤λ…λ¨)


### πΏ Splitting a Leaf Node in BβΊ-Tree
- λ¦¬ν”„ λ…Έλ“λ¥Ό λ¶„ν• ν•λ” κ³Όμ •μ€ λ‹¤μκ³Ό κ°™μ
  - $n$κ°μ $(\text{search-key}, \text{pointer})$ μμ„ μ •λ ¬λ μμ„λ΅ μ¤€λΉ„ν•¨  
  - μ•μ $\lceil n/2 \rceil$κ°λ” κΈ°μ΅΄ λ…Έλ“μ— κ·Έλ€λ΅ μ μ§€ν•κ³ ,  
    λ‚λ¨Έμ§€ μ λ°μ€ μƒλ΅μ΄ λ…Έλ“μ— μ €μ¥ν•¨
  - μƒ λ…Έλ“λ¥Ό $p$λΌκ³  ν•  λ•,  
    $p$μ— μ €μ¥λ ν‚¤ κ°’λ“¤ μ¤‘ κ°€μ¥ μ‘μ€ κ°’μ„ $k$λΌκ³  ν•λ©΄,  
    λ¶€λ¨ λ…Έλ“μ— $(k, p)$λ¥Ό μ‚½μ…ν•¨ β†’ λ¶€λ¨ λ…Έλ“λ” $k$λ¥Ό ν†µν•΄ ν•μ„ λ…Έλ“ κ²½κ³„λ¥Ό κµ¬λ¶„ν•κ² λ¨
  - λ§μ•½ λ¶€λ¨ λ…Έλ“λ„ κ½‰ μ°¨ μλ‹¤λ©΄,  
    ν•΄λ‹Ή λ¶€λ¨λ„ λ¶„ν• ν•κ³  κ·Έ λ¶„ν•  μ •λ³΄λ¥Ό λ” μƒμ„ λ¶€λ¨μ—κ² μ „νν•¨ (**propagate**)
- λ…Έλ“ λ¶„ν• μ€ μµμƒμ„λ΅ μ¬λΌκ° λ•κΉμ§€ κ³„μ†λ  μ μμ  
  β†’ **μµμ•…μ κ²½μ° λ£¨νΈ λ…Έλ“κΉμ§€ λ¶„ν• λμ–΄ νΈλ¦¬ λ†’μ΄κ°€ 1 μ¦κ°€**ν•κ² λ¨

---

#### βοΈ μ¶”κ°€ μ„¤λ…
- μ΄ κµ¬μ΅°λ” BβΊ-νΈλ¦¬κ°€ ν•­μƒ κ· ν•μ΅ν μƒνƒλ¥Ό μ μ§€ν•κ² ν•΄ μ¤  
  β†’ μ‚½μ…μ΄ κ³„μ†λμ–΄λ„ νΉμ • κ²½λ΅λ§ κ³Όλ„ν•κ² κΉμ–΄μ§€μ§€ μ•μ
- λ¶„ν•  ν›„ λ¶€λ¨ λ…Έλ“μ— μ¶”κ°€λλ” ν‚¤ $k$λ” μƒλ΅ μƒμ„±λ λ…Έλ“ $p$λ¥Ό μ‹λ³„ν•  μ μκ² ν•΄ μ£Όλ” **κ²½κ³„κ°’ μ—­ν• **μ„ ν•¨  
  β†’ λ¶€λ¨ μ…μ¥μ—μ„λ” $k$ λ―Έλ§μ κ°’μ€ κΈ°μ΅΄ λ…Έλ“λ΅, $k$ μ΄μƒμ€ $p$λ΅ νƒμƒ‰λλ„λ΅ μ•λ‚΄
- νΈλ¦¬μ λ†’μ΄κ°€ μ¦κ°€ν•λ” κ²½μ°λ” λ“λ¬Όμ§€λ§,  
  β†’ λ°μƒ μ‹ λ£¨νΈ μμ²΄κ°€ μƒλ΅μ΄ λ‚΄λ¶€ λ…Έλ“λ΅ λ°”λ€κ³  μμ‹ λ…Έλ“κ°€ 2κ°λ΅ μ‹μ‘λ¨
- μ΄λ¬ν• μ„¤κ³„ λ•λ¶„μ— BβΊ-νΈλ¦¬λ” **μ‚½μ…/μ‚­μ  μ‹μ—λ„ ν•­μƒ $\log n$ μ‹κ°„λ³µμ΅λ„λ¥Ό μ μ§€**ν•  μ μμ

### πΏ Insertion in BβΊ-Trees (Cont.)

- λ‚΄λ¶€ λ…Έλ“κ°€ κ°€λ“ μ°¬ μƒνƒμ—μ„ $(k, p)$λ¥Ό μ‚½μ…ν•  κ²½μ°, λ‚΄λ¶€ λ…Έλ“λ¥Ό λ¶„ν• ν•¨

- λ¶„ν•  κ³Όμ •μ€ λ‹¤μκ³Ό κ°™μ
  - λ…Έλ“ $N$μ„ λ©”λ¨λ¦¬μƒμ μ„μ‹ λ²„νΌ κ³µκ°„ $M$μ— λ³µμ‚¬ν•¨
  - $M$μ— $(k, p)$λ¥Ό μ‚½μ…ν•¨
  - $M$μ—μ„ μ•λ¶€λ¶„ $P_1, K_1, \dots, K_{\lceil n/2 \rceil -1}, P_{\lceil n/2 \rceil}$λ¥Ό μ›λ λ…Έλ“ $N$μ— λ®μ–΄μ”€
  - λ‚λ¨Έμ§€ $P_{\lceil n/2 \rceil +1}, K_{\lceil n/2 \rceil +1}, \dots, K_n, P_{n+1}$λ” μƒλ΅ ν• λ‹Ήν• λ…Έλ“ $N'$μ— μ €μ¥ν•¨
  - κ²½κ³„ ν‚¤ $K_{\lceil n/2 \rceil}$μ™€ λ…Έλ“ $N'$λ¥Ό λ¶€λ¨ λ…Έλ“μ— μ‚½μ…ν•¨

- κ²°κ³Όμ μΌλ΅ κΈ°μ΅΄ λ…Έλ“λ” μ™Όμ½ μ λ°μ„, μƒ λ…Έλ“λ” μ¤λ¥Έμ½ μ λ°μ„ λ‹΄λ‹Ήν•κ² λ¨

- μ¤λ¥Έμ½ κ·Έλ¦Όμ€ μμ‹μ„
  - μ›λ λ…Έλ“κ°€ `Adams`, `Brandt`, `Califieri`, `Crick`λ¥Ό ν¬ν•¨ν•κ³  μμ—κ³ ,
  - μ΄λ¥Ό κΈ°μ¤€μΌλ΅ `Califieri`λ¥Ό κ²½κ³„ ν‚¤λ΅ μ‚Όμ•„ λ¶„ν• ν•¨

### π—‘οΈ Updates on BβΊ-Trees: Deletion

- λ μ½”λ“λ” νμΌμ—μ„ μ΄λ―Έ μ‚­μ λμ—λ‹¤κ³  κ°€μ •ν•¨  
  β†’ $K$λ” ν•΄λ‹Ή λ μ½”λ“μ ν‚¤, $Ptr$λ” λ μ½”λ“λ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„°

- λ¦¬ν”„ λ…Έλ“μ—μ„ $(K, Ptr)$λ¥Ό μ κ±°ν•¨

- λ§μ•½ ν•΄λ‹Ή λ¦¬ν”„ λ…Έλ“μ μ—”νΈλ¦¬ μκ°€ λ„λ¬΄ μ μ–΄ μµμ† μ΅°κ±΄μ„ λ§μ΅±ν•μ§€ λ»ν•λ©΄,  
  **ν•μ  λ…Έλ“μ™€ λ³‘ν•©(merge siblings)** μν–‰
  - λ‘ λ…Έλ“μ ν‚¤ κ°’μ„ ν•λ‚μ λ…Έλ“(λ³΄ν†µ μ™Όμ½)μ— λ¨λ‘ λ„£κ³ ,  
    λ‚λ¨Έμ§€ λ…Έλ“(μ¤λ¥Έμ½)λ” μ‚­μ ν•¨
  - λ¶€λ¨ λ…Έλ“μ—μ„ μ‚­μ λ λ…Έλ“λ¥Ό κ°€λ¦¬ν‚¤λ ν¬μΈν„° $P_j$μ™€ κ·Έ μ™Όμ½ ν‚¤ $K_{j-1}$λ¥Ό μ κ±°ν•¨  
    β†’ μ΄ κ³Όμ •μ„ **μ¬κ·€μ μΌλ΅** λ¶€λ¨ λ…Έλ“μ— λ€ν•΄ λ°λ³µν•¨

- λ³‘ν•©μ€ νΈλ¦¬ μ„λ΅ μ „νλ  μ μμΌλ©°,  
  μµμ•…μ κ²½μ° λ£¨νΈκΉμ§€ μ¬λΌκ°€ νΈλ¦¬ λ†’μ΄κ°€ μ¤„μ–΄λ“¤ μλ„ μμ


### π” BβΊ-Tree Deletion: Redistribution & Cascading

- λ…Έλ“ μ‚­μ  ν›„ μ—”νΈλ¦¬ μκ°€ λ„λ¬΄ μ μ§€λ§, λ³‘ν•©ν•  λ§νΌ μ—¬μ  μλ” ν•μ  λ…Έλ“κ°€ μ—†μ„ κ²½μ°  
  β†’ **ν¬μΈν„° μ¬λ¶„λ°°(redistribute)**λ¥Ό μν–‰ν•¨
  - ν•μ  λ…Έλ“λ΅λ¶€ν„° μΌλ¶€ μ—”νΈλ¦¬λ¥Ό κ°€μ Έμ™€ λ‘ λ…Έλ“ λ¨λ‘ μµμ† μ΅°κ±΄μ„ λ§μ΅±ν•λ„λ΅ μ¬λ¶„λ°°ν•¨
  - λ¶€λ¨ λ…Έλ“μ— μλ” ν•΄λ‹Ή κµ¬κ°„μ ν‚¤ κ°’μ„ κ°±μ‹ ν•¨

- μ΄λ¬ν• μ‚­μ  λ° μ¬κµ¬μ΅°ν™” κ³Όμ •μ€  
  **μµμ† μ΅°κ±΄(n/2 μ΄μƒμ ν¬μΈν„° μ)μ„ λ§μ΅±ν•λ” λ…Έλ“λ¥Ό λ§λ‚  λ•κΉμ§€ μƒμ„λ΅ μ „ν(cascade)**λ  μ μμ

- λ£¨νΈ λ…Έλ“κ°€ μ‚­μ  ν›„ μ¤μ§ ν•λ‚μ ν¬μΈν„°λ§ κ°€μ§€κ² λλ©΄  
  β†’ λ£¨νΈ λ…Έλ“λ” μ κ±°λκ³ , μ μΌν• μμ‹ λ…Έλ“κ°€ μƒλ΅μ΄ λ£¨νΈκ°€ λ¨


### β™οΈ Complexity of Updates

- μ‚½μ… λ° μ‚­μ  μ—°μ‚°μ I/O λΉ„μ©μ€ νΈλ¦¬μ λ†’μ΄μ— λΉ„λ΅€ν•¨  
  - μ—”νΈλ¦¬ μκ°€ $K$, μ°¨μ(μµλ€ fan-out)κ°€ $n$μΌ λ•  
    β†’ μµμ•…μ κ²½μ° μ‚½μ…/μ‚­μ  μ—°μ‚°μ λ³µμ΅λ„λ” $O(\log_{\lceil n/2 \rceil} K)$

- ν•μ§€λ§ μ‹¤μ  ν™κ²½μ—μ„λ” I/O λ°μƒ νμκ°€ λ” μ μ  
  - λ‚΄λ¶€ λ…Έλ“λ” λ²„νΌμ— μƒμ£Όν•λ” κ²½μ°κ°€ λ§μ  
  - λ€λ¶€λ¶„μ μ‚½μ…/μ‚­μ λ” λ¦¬ν”„ λ…Έλ“λ§ μν–¥μ„ λ°›μ  
  - λ¶„ν• (split)μ΄λ‚ λ³‘ν•©(merge)μ€ μμ£Ό λ°μƒν•μ§€ μ•μ

- λ…Έλ“μ ν‰κ·  μ μ μ¨(occupancy)μ€ μ‚½μ… μμ„μ— λ”°λΌ λ‹¬λΌμ§  
  - λλ¤ μ‚½μ… μ‹ ν‰κ·  2/3  
  - μ •λ ¬λ μμ„λ΅ μ‚½μ…ν•λ©΄ ν‰κ·  1/2

---

### π—‚οΈ BβΊ-Tree File Organization

- BβΊ-Tree νμΌ μ΅°μ§μ—μ„λ” λ¦¬ν”„ λ…Έλ“κ°€ **λ μ½”λ“ μμ²΄λ¥Ό μ €μ¥**ν•¨ (ν¬μΈν„°κ°€ μ•„λ‹)  
  - μ‚½μ…/μ‚­μ /κ°±μ‹ μ΄ μΌμ–΄λ‚λ„ λ μ½”λ“λ“¤μ΄ λ…Όλ¦¬μ μΌλ΅ λ¬¶μΈ μƒνƒλ¥Ό μ μ§€ν•  μ μμ  
  - λ°μ΄ν„°κ°€ λ¬Όλ¦¬μ μΌλ΅λ„ κµ°μ§‘(clustering)λ μƒνƒλ¥Ό μ μ§€ν•κ² λ„μ™€μ¤

- λ¦¬ν”„ λ…Έλ“λ” μ—¬μ „ν μµμ† λ° μ΄μƒ μ°¨ μμ–΄μ•Ό ν•¨ (half-full condition)

- μ‚½μ… λ° μ‚­μ λ” μΌλ°μ μΈ BβΊ-νΈλ¦¬ μΈλ±μ¤μ™€ λ™μΌν• λ°©μ‹μΌλ΅ μν–‰λ¨

---

### π—‚οΈ BβΊ-Tree File Organization (Cont.)

- BβΊ-νΈλ¦¬ νμΌ κµ¬μ΅°μ μμ‹ κ·Έλ¦Ό  
  - λ¦¬ν”„ λ…Έλ“μ—λ” μ‹¤μ  λ μ½”λ“κ°€ μ €μ¥λκ³  μμ (μ: [A,4], [B,8] λ“±)

- ν¬μΈν„°λ³΄λ‹¤ λ μ½”λ“ μμ²΄κ°€ κ³µκ°„μ„ λ” λ§μ΄ μ°¨μ§€ν•λ―€λ΅, **κ³µκ°„ ν¨μ¨(space utilization)**μ΄ μ¤‘μ”ν•¨

- κ³µκ°„ ν™μ©λ„λ¥Ό λ†’μ΄κΈ° μ„ν•΄ λ¶„ν• (split)μ΄λ‚ λ³‘ν•©(merge) μ‹ **μ–‘μ½ ν•μ  λ…Έλ“λ¥Ό λ¨λ‘ μ°Έμ—¬**μ‹μΌ μ¬λ¶„λ°°λ¥Ό μν–‰ν•  μ μμ  
  - μ™Όμ½ λ° μ¤λ¥Έμ½ ν•μ λ¥Ό ν•¨κ» κ³ λ ¤ν•¨  
  - κ·Έ κ²°κ³Ό κ° λ…Έλ“λ” μµμ† $\left\lfloor \frac{2n}{3} \right\rfloor$κ°μ μ—”νΈλ¦¬λ¥Ό μ μ§€ν•  μ μμ


### π“ Other Issues in Indexing

- **λ μ½”λ“ μ΄λ™κ³Ό λ³΄μ΅° μΈλ±μ¤ λ¬Έμ **
  - λ μ½”λ“κ°€ μ΄λ™ν•λ©΄ ν•΄λ‹Ή λ μ½”λ“λ¥Ό κ°€λ¦¬ν‚¤λ” λ¨λ“  λ³΄μ΅° μΈλ±μ¤λ„ κ°±μ‹ λμ–΄μ•Ό ν•¨
  - BβΊ-νΈλ¦¬ νμΌ κµ¬μ΅°μ—μ„μ λ…Έλ“ λ¶„ν• μ€ λ§¤μ° λΉ„μ

- **ν•΄κ²°μ±…**
  - λ³΄μ΅° μΈλ±μ¤μ—μ„λ” ν¬μΈν„° λ€μ‹  BβΊ-νΈλ¦¬ νμΌ κµ¬μ΅°μ **κ²€μƒ‰ ν‚¤**λ¥Ό μ‚¬μ©ν•¨
  - κ²€μƒ‰ ν‚¤κ°€ κ³ μ ν•μ§€ μ•λ‹¤λ©΄ λ μ½”λ“ IDλ¥Ό ν•¨κ» μ‚¬μ©ν•΄μ•Ό ν•¨
  - λ μ½”λ“λ¥Ό μ°ΎκΈ° μ„ν•΄ νμΌ μ΅°μ§μ„ ν• λ² λ” μνν•΄μ•Ό ν•λ―€λ΅ μΏΌλ¦¬ λΉ„μ©μ€ μ¦κ°€ν•μ§€λ§,  
    λ…Έλ“ λ¶„ν•  μ‹ μΈλ±μ¤ κ°±μ‹  λ¶€λ‹΄μ΄ μ¤„μ–΄λ“¦

---

### π”¤ Indexing Strings

- **κ°€λ³€ κΈΈμ΄ λ¬Έμμ—΄μ„ ν‚¤λ΅ μ‚¬μ©ν•  κ²½μ°**
  - ν‚¤ κΈΈμ΄κ°€ λ‹¤λ¥΄λ―€λ΅ fan-outλ„ κ°€λ³€μ μ„
  - ν¬μΈν„° κ°μλ³΄λ‹¤ κ³µκ°„ ν™μ©λ¥ (space utilization)μ„ κΈ°μ¤€μΌλ΅ λ¶„ν•  νλ‹¨

- **Prefix Compression**
  - λ‚΄λ¶€ λ…Έλ“μ—μ„λ” μ „μ²΄ ν‚¤ λ€μ‹  **κ³µν†µ μ ‘λ‘μ‚¬(prefix)**λ§ μ €μ¥ κ°€λ¥
    - μ: "Silas"μ™€ "Silberschatz"λ” "Sib"λ§μΌλ΅ κµ¬λ¶„ κ°€λ¥
  - λ¦¬ν”„ λ…Έλ“μ—μ„λ„ **κ³µν†µ μ ‘λ‘μ‚¬ μ••μ¶•**μ„ ν†µν•΄ μ €μ¥ κ³µκ°„ μ μ•½ κ°€λ¥

---

### π“¦ Bulk Loading and Bottom-Up Build

- ν•­λ©μ„ ν•λ‚μ”© μ‚½μ…ν•  κ²½μ° BβΊ-νΈλ¦¬λ” μ—”νΈλ¦¬λ‹Ή μµμ† 1νμ I/Oκ°€ ν•„μ”ν•¨  
  - νΉν λ¦¬ν”„ λ…Έλ“κ°€ λ©”λ¨λ¦¬μ— μ—†μ„ κ²½μ° λ”μ± λΉ„ν¨μ¨μ μ„  
  - λ€λ‰ λ°μ΄ν„°λ¥Ό λΉ λ¥΄κ² μ‚½μ…ν•  λ•λ” λ§¤μ° λΉ„ν¨μ¨μ μ„ β†’ **Bulk Loading**

- **ν¨μ¨μ μΈ λ°©λ²• 1: μ •λ ¬ κΈ°λ° μ‚½μ…**
  - λ¨Όμ € λ°μ΄ν„°λ¥Ό μ •λ ¬ν• λ’¤, μ •λ ¬λ μμ„λ€λ΅ μ‚½μ…  
  - I/O μ„±λ¥μ€ ν–¥μƒλμ§€λ§ λ€λ¶€λ¶„μ λ¦¬ν”„ λ…Έλ“κ°€ μ λ°λ§ μ±„μ›μ§

- **ν¨μ¨μ μΈ λ°©λ²• 2: Bottom-up BβΊ-tree construction**
  - λ¨Όμ € λ°μ΄ν„°λ¥Ό μ •λ ¬ν•κ³ 
  - λ¦¬ν”„ λ λ²¨λ¶€ν„° μ„λ΅ μ°¨κ·Όμ°¨κ·Ό νΈλ¦¬λ¥Ό κµ¬μ„±ν•¨
  - λ€λ¶€λ¶„μ DB μ‹μ¤ν…μ΄ μ΄ λ°©μ‹μ„ μ±„νƒν•κ³  μμ
